## IOC(제어의 역전)
여러 책임(기능)을 가진 객체의 책임들을 각각의 독립적인 객체들로 분리시키고(관심사의 분리), 객체끼리의 관계설정을 담당하는 객체를 만들어 객체 하나하나가 독립적(하나의 책임만 가지게)이게 만드는 것을
제어의 역전이라고 한다. 기존의 객체가 자신이 사용할 객체를 필요에 따라 직접 생성하는 제어권을 가졌다면 관심사를 분리시키고 전략패턴을 채택했을 때의 객체는 사용 객체에 대한 제어권을 제 3자에게 위임하고
객체는 자신 가진 책임에만 집중하면 된다. 즉 사용할 객체의 사용법(인터페이스)만 알고있으면 구현체 내부에서 어떤 행위가 이루어지는지에 대해 클라이언트 객체(기능을 사용하는 객체)는 알 필요가 없어졌다. 

## DI(의존 관계 주입)
스프링의 가장 핵심적인 부분이다. 어플리케이션에서 필요한 객체 간 관계설정을 담당하는 객체의 단일 책임이다. 클라이언트 객체가 자신의 책임(기능) 실행시 필요한 객체를 클라이언트 객체 생성자를 통해 제공해는 것을 의존관계 주입이라고한다.  
우리는 이 의존관계 주입을 해주는 오브젝트를 오브젝트 팩토리, 빈 팩토리, IOC컨테이너, 스프링 컨테이너 ,DI컨테이너, ApplicationContext라고 부른다.(거의 동일한 의미이다.)  

```java
public Factory {

  public DAO getDao(){
    // MakeConnection객체와 연결된 DAO 객체 생성하려면 Factory(DI컨테이너)객체의 getDao()메서드를 통해서 가져오면된다. 
    DAO dao = new DAO(getMakeConnection());
  return dao;
  }
  
  public Connection getMakeConnection(){
    return new MakeConnection();
  }
}
```

## 스프링으로 IOC/DI 설정정보 만들기 
위의 개념들은 스프링 없이 순수한 자바객체로 구현하는 것이 가능하다. 하지만 스프링은 DI를 확용하여 더 편리한 기능을 사용하게해준다. 그럼 이제 스프링에서 사용하는 빈팩토리로 만들어보자 
@Configuration과 @Bean을 사용하여 팩토리 객체를 스프링에서 사용할 ApplicationContext에서 사용할 설정정보로 만들 수 있다. 
* 빈 : 빈 팩토리에서 생성 반환되는 오브젝트를 의미한다. 

```java
@Configuration
public Factory {
  @Bean
  public DAO getDao(){
    // MakeConnection객체와 연결된 DAO 객체 생성하려면 Factory(DI컨테이너)객체의 getDao()메서드를 통해서 가져오면된다. 
    DAO dao = new DAO(getMakeConnection());
  return dao;
  }
  
  @Bean
  public Connection getMakeConnection(){
    return new MakeConnection();
  }
}
```
순수 자바 코드로 관계설정 팩토리를 만들고 사용할 때 new연산자를 통햇 팩토리 객체를 만들고 해당 객체에서 필요한 인스턴스를 생성하는 메서드를 실행시켜야한다. 하지만 스프링에서는  
ApplicationContext(이하 ac)에 설정정보로서 팩토리 객체를 제공하고 설정정보를 통해 생성/반환된 오브젝트를 ac가 관리한다.(@Bean으로 등록된 메서드명을 key값 반환된 오브젝트를 value값으로)  
예상가능하겠지만 @Configuration은 스프링의 설정 정보라고 알아두면 된다.  

사용시에는 아래와 같이 사용하면된다.   
```java
ApplicationContext ac = new AnotationConfigApplicationContext(설정정보클래스.class);
[메서드를 통해 반환될 객체 타입] 변수명 = ac.getBean(사용할 객체를 반환해주는 팩토리클래스의 메서드);  
```  

사용방법을 보면 기존의 자바코드와 사용법이 크게 다르지 않다. 하지만 직접 객체를 생성하여 확인해보면 다른점이 보인다.  
순수 자바코드를 이용해서 객체를 반환하여 받으면 new연산자를 통해 새로운 객체가 생성된다. 하지만 스프링의 ac에서 객체를 가져오면 처음 생성된 객체와 같은 객체가 반환된다.  
이는 스프링 ac가 제공하는 싱글톤레지스트리 때문이다.  

### 싱글톤레지스트리  
싱글톤 레지스트리를 간단하게 보면 한번 생성된 객체를 재사용할 수 있게 설정해주는 스프링의 기능이다.  
기존의 싱글톤 패턴을 활용한 스프링의 놀라운 기능이다.  
매번 객체가 필요할 때마다 객체를 생성한다고 생각해보자 만약에 팩토리에 등록된 빈이 5개가 있고 매 호출마다 빈이 생성되면 생성마다 빈은 5개씩 늘어나게 된다. 자바의 gc가 많이 발전되었다고 하지만 이렇게
계속해서 쌓여 메모리를 소모하는 객체를 다 감당하는 것은 불가능하다.  
그래서 만들어놓은 객체를 공유할 수 있는 싱글톤 레지스트리 방식을 사용한다. 이 기능 때문에 빈에 있는 객체를 꺼내올 때마다 새로운 객체가 반환되는 것이 아니고 기존에 생성하여 보관하고 있는 객체를 반환해주는 것이다.   
기존의 싱글톤 패턴과 다른점은 객체의 생성자를 private으로 만들필요도 없고 static메서드를 사용할 필요도 없다. 기존의 싱글톤 패턴이 주는 단점들을 모두 제외하고 장점만 사용할 수 있게되어 필요에 따라 객체를 생성하여 사용하는 것이 가능하다.  






